import{r as s,h as m,j as e,C as h,L as g,E as v}from"./index-m_fvB0-o.js";const f=()=>{const[t,x]=s.useState([]),[c,n]=s.useState(!0),[o,b]=s.useState(null),[l,u]=s.useState(null);s.useEffect(()=>{console.debug("[AdminReports] useEffect: fetching all user reports"),m.getAllUserReports().then(r=>{console.debug("[AdminReports] API response:",r),x(r.data.reports||[]),n(!1)}).catch(r=>{var a,i;console.error("[AdminReports] API error:",r),b(((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)||r.message),n(!1)})},[]);const p=localStorage.getItem("theme")||"light";let d="";return p==="premium"&&(d="bg-gradient-to-br from-[rgba(139,92,246,0.25)] via-[rgba(15,15,35,0.85)] to-[rgba(75,0,130,0.7)] backdrop-blur-2xl"),e.jsx(h,{className:`rounded-2xl shadow-2xl border-2 border-[var(--accent-color)] theme-transition ${d}`,children:e.jsxs("div",{id:"user-reports-export",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h2",{className:"text-2xl font-extrabold text-[var(--accent-color)] drop-shadow-lg font-sans",children:"User Reports"})}),e.jsx("div",{className:"mb-6 flex flex-col items-center",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl p-4 mb-2 border-2 border-[var(--accent-color)] shadow-lg bg-[rgba(139,92,246,0.10)] backdrop-blur-lg theme-transition",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-[var(--accent-color)] drop-shadow",children:"Summary"}),e.jsxs("div",{className:"flex justify-between text-sm text-[var(--text-primary)]",children:[e.jsxs("div",{children:["Total Users: ",e.jsx("span",{className:"font-bold",children:t.length})]}),e.jsxs("div",{children:["Total Quizzes:"," ",e.jsx("span",{className:"font-bold",children:t.reduce((r,a)=>r+a.totalQuizzes,0)})]}),e.jsxs("div",{children:["Avg. Score:"," ",e.jsxs("span",{className:"font-bold",children:[t.length>0?(t.reduce((r,a)=>r+a.avgScore,0)/t.length).toFixed(2):"0.00","%"]})]})]})]})}),l&&e.jsx("div",{className:"mb-2 text-green-600",children:l}),c&&e.jsx(g,{}),o&&e.jsx(v,{message:o}),!c&&!o&&e.jsx("div",{className:"overflow-x-auto max-h-[60vh] smooth-scrollbar",children:e.jsxs("table",{id:"user-reports-table",className:"min-w-full border-2 border-[var(--accent-color)] rounded-2xl overflow-hidden bg-white/80 dark:bg-[rgba(139,92,246,0.10)] backdrop-blur theme-transition",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"User ID"}),e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"Name"}),e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"Email"}),e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"Registered At"}),e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"Total Quiz Attempted"}),e.jsx("th",{className:"px-4 py-2 border-b-2 border-[var(--accent-color)] text-[var(--accent-color)] bg-transparent font-bold",children:"Percentage (%)"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4 text-[var(--text-primary)] bg-transparent",children:"No reports found."})}):t.map(r=>e.jsxs("tr",{className:"hover:bg-[rgba(var(--accent-rgb,0,132,255),0.08)] transition",children:[e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:r.id}),e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:r.username}),e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:r.email}),e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:new Date(r.registeredAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:r.totalQuizzes}),e.jsx("td",{className:"border-b-2 border-[var(--accent-color)] px-2 py-1 text-[var(--text-primary)] bg-transparent",children:r.totalQuizzes>0?(r.totalCorrect/(r.totalQuizzes*3)*100).toFixed(2):"0.00"})]},r.id))})]})})]})})};export{f as AdminReports,f as default};
